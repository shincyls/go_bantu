<main class="profile-page">

  <section class="section-profile-cover section-shaped">
      <!-- Circles background -->
      <div class="shape shape-style-1 shape-primary alpha-4" style="background: linear-gradient(150deg,#281483 15%,#8f6ed5 70%,#d782d9 94%);">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
  </section>
  
  <section class="section">
    <div class="container" id="profile">
      <%= render partial: 'profile' %>
    </div>
  </section>

  
    <!-- Tabs -->
<section class="section">
      <div class="container" style="max-width: 1150px;">
          <div class="card shadow mt--500 mb--500">
            <div class="px-4">
                      <div class="nav-wrapper">
                          <ul class="nav nav-pills nav-fill flex-column flex-md-row" id="tabs-icons-text" role="tablist">
                              <li class="nav-item">
                                  <a class="nav-link mb-sm-3 mb-md-0 active" id="tabs-icons-text-1-tab" data-toggle="tab" href="#tabs-icons-text-1" role="tab" aria-controls="tabs-icons-text-1" aria-selected="true"><i class="ni ni-badge mr-2"></i>Profile</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-2-tab" data-toggle="tab" href="#tabs-icons-text-2" role="tab" aria-controls="tabs-icons-text-2" aria-selected="false"><i class="ni ni-paper-diploma mr-2"></i>Projects</a>
                              </li>
                              <li class="nav-item">
                                  <a class="nav-link mb-sm-3 mb-md-0" id="tabs-icons-text-3-tab" data-toggle="tab" href="#tabs-icons-text-3" role="tab" aria-controls="tabs-icons-text-3" aria-selected="false"><i class="ni ni-collection mr-2"></i>Volunteered</a>
                              </li>
                          </ul>
                      </div>
                    
                  <div class="card-body">
                      <div class="tab-content" id="myTabContent">
                      
                          <div class="tab-pane fade show active" id="tabs-icons-text-1" role="tabpanel" aria-labelledby="tabs-icons-text-1-tab">

                        <div class="mt-5 py-5 border-top text-center">
                           <div class="row justify-content-center">
                              <% if @user.volunteer.present? %>
                                <h6 class="heading-title mb-3">Volunteer Criterias</h6><br>
                                <div class="criteria">
                                    <p class="display-6"><span class="badge badge-pill badge-secondary">Skills</span>
                                      <% @user.volunteer.skills.each do |s| %>
                                        <span class="badge badge-pill badge-primary"><%= s.name %></span>
                                      <% end %>
                                    </p>
                                    <p class="display-6"><span class="badge badge-pill badge-secondary">Professions</span>
                                      <% @user.volunteer.professions.each do |p| %>
                                        <span class="badge badge-pill badge-info"><%= p.name %></span>
                                      <% end %>
                                    </p>
                                    <p class="display-6"><span class="badge badge-pill badge-secondary">Causes</span>
                                      <% @user.causes.each do |c| %>
                                      <span class="badge badge-pill badge-default"><%= c.name %></span>
                                      <% end %>
                                    </p>
                                </div>
                                  <!-- Display my matching projects-->
                                    <% if current_user.id == @user.id %>
                                      <h6>Matching Projects</h6>
                                      <%= render partial: "matching" %>
                                      <% end %>
                                    <% end %>
                              </div>
                            </div>
                        </div>

                               
                            


                    <div class="tab-pane fade" id="tabs-icons-text-2" role="tabpanel" aria-labelledby="tabs-icons-text-2-tab">
                            <% if @user.organizer.present? %>
                                <% @user.organizer.projects.each do |p| %>
                                  <p class="badge badge-pill badge-default"><%= p.title %></p>
                                <% end %>
                            <% end %>
                    </div>
                   
                      <!-- Card 3 Donation -->
                            <div class="tab-pane fade" id="tabs-icons-text-3" role="tabpanel" aria-labelledby="tabs-icons-text-3-tab">
                                    <% if @user.donor.present? %>
                                    <% @user.donor.donations.each do |d| %>
                                        <h6><%=d.project.title%> : <%=d.amount%> : <%=d.status%> : <%=time_ago_in_words(d.created_at)%> ago</h6>
                                    <% end %>
                                    <% else %>
                                    
                                <% end %>
                            </div>
                        

                            </div>
                        </div>
                    </div>
                </div>
              </div>
          </div>
      </section>      



  <!-- message notifiying user of currently matched/unmatched projects -->
  <% if signed_in? %>
  <% if current_user == @user %>
    <center>
      <h4 class="text-uppercase text-bold">
        <% if @projects == [] %>
          There are currently no projects matching your criteria. Please try updating your profile or try again later.
        <% else %>
          You have projects matching <%= @match_percent %> of your criteria.
        <% end %>
      </h4>
    </center>

    <!-- 100% projects match  -->
    <% if !@hundred.nil? && @hundred != false %>
      <section class="section section-lg pt-lg-0">
        <div class="container">
          <center>
            <h5 class="text-uppercase text-bold">
              Projects with 100% match
            </h5>
          </center>
          <div class="row justify-content-center">
            <div class="col-lg-12">
              <div class="row row-grid" id="search">
                <%= render partial: 'projects/card' %>
              </div>
            </div>
          </div>
        </div>
      </section>
    <% end %>

    <!-- 75% projects match  -->
    <% @projects = @projects_seventy_five %>
    <% if !@projects.nil? && @projects.count > 0 %>
      <section class="section section-lg pt-lg-0">
        <div class="container">
          <center>
            <h5 class="text-uppercase text-bold">
              Projects with 75% match
            </h5>
          </center>
          <div class="row justify-content-center">
            <div class="col-lg-12">
              <div class="row row-grid" id="search">
                <%= render partial: 'projects/card' %>
              </div>
            </div>
          </div>
        </div>
      </section>
    <% end %>

    <!-- 50% projects match  -->
    <% @projects = @projects_fifty %>
    <% if !@projects.nil? && @projects.count > 0 %>
      <section class="section section-lg pt-lg-0">
        <div class="container">
          <center>
            <h5 class="text-uppercase text-bold">
              Projects with 50% match
            </h5>
          </center>
          <div class="row justify-content-center">
            <div class="col-lg-12">
              <div class="row row-grid" id="search">
                <%= render partial: 'projects/card' %>
              </div>
            </div>
          </div>
        </div>
      </section>
    <% end %>
  <% end %>
<% end %>

</main>

                          


         



                            

                              
                             
                        
